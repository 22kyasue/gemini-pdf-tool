import { useState, useEffect } from 'react';

type Lang = 'en' | 'ja';

const translations = {
    en: {
        appTitle: 'GEMINI PDF TOOL',
        sources: 'SOURCES',
        editor: 'EDITOR',
        preview: 'PREVIEW',
        detected: 'Detected:',
        enhance: 'Enhance:',
        pasteLogHere: 'Paste log here...',
        processingApi: 'Processing with Gemini API...',
        autoSplitSuccess: 'Auto-split by Gemini API',
        aiEnhancementApplied: 'AI Enhancement applied',
        syncApi: 'Sync API',
        enhanceApi: 'Enhance (API)',
        whatWasIssue: 'What exactly was the issue, and how should it be fixed?...',
        customInstructionsEnhance: "Custom instructions (e.g., 'Ensure the code blocks are formatted correctly')...",
        cancel: 'Cancel',
        done: 'Done',
        settingsTitle: 'System Settings',
        settingsEnterPassword: 'Enter password for free gemini api pro',
        settingsOrProvideKey: 'Or provide your own Google AI API Key (Gemini)',
        settingsHint: 'Required for accurate User/AI splitting of ChatGPT, Claude, and other chat logs.',
        testApiKey: 'Test API Key',
        testing: 'Testing...',
        apiOk: 'API OK',
        getFreeKey: 'Get a free key at',
        proTemplate: 'Professional Template: Clean, modern layout',
        academicTemplate: 'Academic Template: Formal, document-style layout',
        execTemplate: 'Executive Template: High-contrast, bold layout',
        switchMode: 'Switch to',
        apiConsole: 'API Console: View LLM processing logs',
        settingsTooltip: 'Settings (Ctrl+,): API limits & config',
        exportMd: 'Export Markdown (.md): Raw text file',
        exportJson: 'Export JSON: Developer data format',
        exportHtml: 'Export HTML: Standalone web page',
        exportPdf: 'Export PDF (Ctrl+P): High-quality print',
        newSource: 'New Source',
        formatting: 'Formatting',
        tables: 'Tables',
        code: 'Code',
        latex: 'LaTeX',
        enhanceCardTitle: 'Enhance with AI',
        enhanceCardDesc: 'Polish formatting using Gemini API. Select features below — uses tokens only when you click Enhance.',
        enhanceBtnPrefix: 'Enhance',
        responseSuffix: 'Response',
        responsesSuffix: 'Responses',
        split: 'Split',
        sendToNotebookLM: 'Send to NotebookLM: Copies chat & opens AI',
        switchToLightMode: 'Switch to light mode',
        switchToDarkMode: 'Switch to dark mode',
        switchToJapanese: '日本語に切り替え',
        switchToEnglish: 'Switch to English',
        regexMode: 'Regex',
        geminiApiMode: 'Gemini API',
        readyMode: 'Ready',
        noApiKeyMode: 'No API Key',
    },
    ja: {
        appTitle: 'GEMINI PDF ツール',
        sources: 'ソース',
        editor: 'エディター',
        preview: 'プレビュー',
        detected: '検出:',
        enhance: 'AI 補正:',
        pasteLogHere: 'ここにログを貼り付けてください...',
        processingApi: 'Gemini API で処理中...',
        autoSplitSuccess: 'Gemini API による自動分割が完了しました',
        aiEnhancementApplied: 'AI による補正が適用されました',
        syncApi: 'API 再同期',
        enhanceApi: 'API で補正',
        whatWasIssue: 'どのような問題がありましたか？どう修正すべきですか？...',
        customInstructionsEnhance: "カスタム指示 (例: 'コードブロックのフォーマットを整形して')...",
        cancel: 'キャンセル',
        done: '完了',
        settingsTitle: 'システム設定',
        settingsEnterPassword: '無料の Gemini API Pro パスワードを入力',
        settingsOrProvideKey: 'または、ご自身の Google AI API キー (Gemini) を入力',
        settingsHint: 'ChatGPT、Claude、その他のチャットログをユーザー/AIに正確に分割するために必要です。',
        testApiKey: 'APIキーをテスト',
        testing: 'テスト中...',
        apiOk: 'API正常',
        getFreeKey: '無料のキーを取得：',
        proTemplate: 'プロフェッショナル: クリーンでモダンなレイアウト',
        academicTemplate: 'アカデミック: フォーマルな文書スタイル',
        execTemplate: 'エグゼクティブ: コントラストの高い強調レイアウト',
        switchMode: '切り替え：',
        apiConsole: 'APIコンソール: LLM 処理ログを表示',
        settingsTooltip: '設定 (Ctrl+,): API制限と構成',
        exportMd: 'マークダウン出力 (.md): 生のテキストファイル',
        exportJson: 'JSON出力: 開発者データフォーマット',
        exportHtml: 'HTML出力: 独立したウェブページ',
        exportPdf: 'PDF出力 (Ctrl+P): 高品質な印刷',
        newSource: '新規ソース',
        formatting: '書式設定',
        tables: 'テーブル',
        code: 'コード',
        latex: 'LaTeX',
        enhanceCardTitle: 'AI で補正する',
        enhanceCardDesc: 'Gemini API を使ってフォーマットを洗練させます。[補正]をクリックした時だけトークンを消費します。',
        enhanceBtnPrefix: '補正',
        responseSuffix: '件のメッセージ',
        responsesSuffix: '件のメッセージ',
        split: '分割',
        sendToNotebookLM: 'NotebookLM に送る: チャットをコピーして AI を開く',
        switchToLightMode: 'ライトモードに切り替え',
        switchToDarkMode: 'ダークモードに切り替え',
        switchToJapanese: '日本語に切り替え',
        switchToEnglish: '英語に切り替え',
        regexMode: '正規表現 (Regex)',
        geminiApiMode: 'Gemini API',
        readyMode: '準備完了',
        noApiKeyMode: 'APIキーなし',
    }
};

export function useTranslation() {
    const [lang, setLang] = useState<Lang>(() => (localStorage.getItem('appLang') as Lang) || 'en');

    useEffect(() => {
        localStorage.setItem('appLang', lang);
    }, [lang]);

    const toggleLang = () => setLang(prev => prev === 'en' ? 'ja' : 'en');
    const t = translations[lang];

    return { lang, toggleLang, t };
}
