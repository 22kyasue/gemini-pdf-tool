import { useState, useEffect } from 'react';

type Lang = 'en' | 'ja';

const translations = {
    en: {
        appTitle: 'CHATSOURCE',
        sources: 'SOURCES',
        editor: 'EDITOR',
        preview: 'PREVIEW',
        detected: 'Detected:',
        enhance: 'Enhance:',
        pasteLogHere: 'Paste log here...',
        processingApi: 'Processing with Gemini API...',
        autoSplitSuccess: 'Auto-split by Gemini API',
        aiEnhancementApplied: 'AI Enhancement applied',
        syncApi: 'Sync API',
        enhanceApi: 'Enhance (API)',
        whatWasIssue: 'What exactly was the issue, and how should it be fixed?...',
        customInstructionsEnhance: "Custom instructions (e.g., 'Ensure the code blocks are formatted correctly')...",
        cancel: 'Cancel',
        done: 'Done',
        settingsTitle: 'System Settings v2.4.0',
        settingsEnterPassword: 'Enter password for free gemini api pro',
        settingsOrProvideKey: 'Or provide your own Google AI API Key (Gemini)',
        settingsHint: 'Required for accurate User/AI splitting of ChatGPT, Claude, and other chat logs.',
        testApiKey: 'Test API Key',
        testing: 'Testing...',
        apiOk: 'API OK',
        getFreeKey: 'Get a free key at',
        proTemplate: 'Professional Template: Clean, modern layout',
        academicTemplate: 'Academic Template: Formal, document-style layout',
        cyberTemplate: 'Cyber Template: Neon dark-mode hacker layout',
        switchMode: 'Switch to',
        apiConsole: 'API Console: View LLM processing logs',
        settingsTooltip: 'Settings (Ctrl+,): API limits & config',
        exportMd: 'Export Markdown (.md): Raw text file',
        exportJson: 'Export JSON: Developer data format',
        exportHtml: 'Export HTML: Standalone web page',
        exportPdf: 'Export PDF (Ctrl+P): High-quality print',
        newSource: 'New Source',
        formatting: 'Formatting',
        tables: 'Tables',
        code: 'Code',
        latex: 'LaTeX',
        enhanceCardTitle: 'Enhance with AI',
        enhanceCardDesc: 'Polish formatting using Gemini API. Select features below — uses tokens only when you click Enhance.',
        enhanceBtnPrefix: 'Enhance',
        responseSuffix: 'Response',
        responsesSuffix: 'Responses',
        split: 'Split',
        sendToNotebookLM: 'Send to NotebookLM: Copies chat & opens AI',
        switchToLightMode: 'Switch to light mode',
        switchToDarkMode: 'Switch to dark mode',
        switchToJapanese: '日本語に切り替え',
        switchToEnglish: 'Switch to English',
        regexMode: 'Regex',
        geminiApiMode: 'Gemini API',
        readyMode: 'Ready',
        noApiKeyMode: 'No API Key',
        // Header & auth
        signIn: 'Sign in',
        signInFree: 'Sign in free',
        signInForMore: 'Sign in for more',
        signOut: 'Sign out',
        signInCreate: 'Sign In / Create Account',
        // Usage counter
        calls: 'calls',
        words: 'words',
        upgrade: 'Upgrade',
        // Enhance area
        enhanceBtn: 'Enhance',
        enhanceHint: 'Formatting lost? Click <strong>Enhance</strong> to restore bold, code blocks & tables.',
        // Welcome state
        welcomeTitle: 'Beautiful PDFs from AI chats',
        welcomeSub: 'Transform raw conversations into polished, professional documents in seconds',
        welcomeStep1: 'Paste',
        welcomeStep2: 'AI formats',
        welcomeStep3: 'Export PDF',
        welcomeAiFormatting: 'AI Formatting',
        welcomeAiFormattingDesc: 'Auto-detect turns, tables & code',
        welcomeExportReady: 'Export Ready',
        welcomeExportReadyDesc: 'PDF, Markdown & print layouts',
        welcomeMultiLlm: 'Multi-LLM',
        welcomeMultiLlmDesc: 'Gemini, ChatGPT, Claude & more',
        tryWithSample: 'Try with sample',
        welcomeCta: 'Paste a chat or drop a <kbd>.txt</kbd> file to start',
        // Empty / error states
        noTurnsDetected: 'No turns detected',
        noTurnsHint: 'Paste a chat log in the editor or drop a .txt file',
        generatingPdf: 'Generating PDF...',
        generating: 'Generating...',
        // Error banner
        rateLimitTitle: 'Rate Limit',
        authErrorTitle: 'Auth Error',
        networkErrorTitle: 'Network Error',
        signInRequired: 'Sign in Required',
        apiErrorTitle: 'API Error',
        noApiActivity: 'No API activity yet. Paste non-Gemini text to trigger.',
        // Settings
        account: 'Account',
        apiKeyTab: 'API Key',
        freePlan: 'Free plan',
        proPlan: 'Pro plan',
        signInHint: 'Sign in for 10 free AI-powered calls per week.',
        apiCalls: 'API calls (weekly)',
        wordsProcessed: 'Words processed (weekly)',
        resetsIn: 'Resets in',
        days: 'days',
        proIncludes: 'Pro includes: unlimited calls & words, priority processing',
        upgradeToPro: 'Upgrade to Pro — ¥780/month',
        priceDiscount: '21% off',
        priceOriginal: '¥980',
        stripeNote: 'Secure payment via Stripe · Cancel anytime',
        paymentSuccess: 'Payment successful!',
        paymentActivating: 'Activating your Pro plan...',
        paymentThankYou: 'Thank you for upgrading. This usually takes just a few seconds.',
        proUnlimited: 'Pro — unlimited calls & words',
        proNoKeyNeeded: "You're on the Pro plan — no API key needed!",
        proNoKeyHint: 'All AI features are included with your subscription.',
        proAdvancedKey: 'Advanced: use your own key instead',
        proKeyOverride: 'Your own key overrides the Pro server.',
        proSwitchToServer: 'Use Pro server instead',
        proSwitchConfirm: 'Remove your API key and switch to the Pro server?',
        proSwitchConfirmDesc: 'Your own API key will be removed from settings. You can re-enter it anytime.',
        proSwitchYes: 'Switch to Pro',
        proSwitchCancel: 'Cancel',
        ownKeyUnlimited: 'Entering your own key gives you unlimited usage.',
        // SignInPromptModal
        signInPromptTitle: 'Want more? Sign in for free',
        signInPromptSub: 'Create a free account to unlock more AI-powered features',
        signInBenefit1: '10 API calls per week',
        signInBenefit2: '50,000 words per week',
        signInBenefit3: 'All formatting features included',
        signInPromptByok: 'Have your own Gemini API key? Enter it in Settings',
        // UpgradeModal
        upgradeTitle: 'Upgrade to Pro',
        upgradeTitleLimit: "You've reached the free limit",
        proIncludes2: 'Pro plan includes:',
        unlimitedCalls: 'Unlimited API calls',
        unlimitedWords: 'Unlimited word processing',
        priorityProcessing: 'Priority Gemini processing',
        allProFeatures: 'All future Pro features',
        redirectingCheckout: 'Redirecting to checkout...',
        upgradeByokHint: 'Have your own Gemini API key?',
        enterInSettings: 'Enter it in Settings',
        forUnlimitedUse: 'for unlimited use.',
        // AuthModal
        authWelcomeBack: 'Welcome back',
        authCreateAccount: 'Create your account',
        authSignInSub: 'Sign in to export your AI chats to PDF',
        authSignUpSub: 'Get 10 free exports per week, no credit card needed',
        authContinueGoogle: 'Continue with Google',
        authOr: 'or',
        authEmail: 'Email',
        authPassword: 'Password',
        authPasswordHintSignup: 'At least 6 characters',
        authSignInBtn: 'Sign In',
        authCreateBtn: 'Create Account',
        authPleaseWait: 'Please wait...',
        authNoAccount: "Don't have an account?",
        authHasAccount: 'Already have an account?',
        authSignUpFree: 'Sign up free',
        authCheckEmail: 'Check your email',
        authCheckEmailMsg: 'Check your email and click the confirmation link to activate your account.',
        authGotIt: 'Got it',
        // EnhanceThread
        aiEnhancement: 'AI Enhancement',
        enhancedCount: 'Enhanced',
        enhancing: 'Enhancing...',
        reEnhancePlaceholder: "Describe an issue to re-enhance (e.g. 'fix the table formatting')...",
        reEnhance: 'Re-enhance',
        initialEnhancement: 'Initial enhancement',
        // Share link import
        shareImport: 'Import share link',
        sharePlaceholder: 'Paste a ChatGPT or Gemini share link...',
        shareLoad: 'Load',
        shareLoading: 'Loading...',
        shareSuccess: 'Imported {count} messages from {platform}',
        shareClaudeUnsupported: 'Claude share links are not supported — please copy-paste the conversation text instead.',
        shareUnsupportedDomain: 'Only ChatGPT and Gemini share links are supported.',
        shareInvalidUrl: 'Please enter a valid share link URL.',
        shareSignInRequired: 'Sign in to import share links.',
        // Convert page
        convertHeroTitle: 'Convert AI Chats to PDF',
        convertHeroSub: 'Transform your ChatGPT and Gemini conversations into professional PDF documents with one click.',
        convertPlaceholder: 'Paste a ChatGPT or Gemini share link here...',
        convertToPdf: 'Convert to PDF',
        convertToEditor: 'Open in Editor',
        convertHowTitle: 'How It Works',
        convertStep1Title: 'Get Share Link',
        convertStep1Desc: 'Click the share button in ChatGPT or Gemini to generate a public link.',
        convertStep2Title: 'Paste URL',
        convertStep2Desc: 'Paste the share link above and choose your output format.',
        convertStep3Title: 'Download',
        convertStep3Desc: 'Your professional PDF document is ready instantly.',
        convertWhyTitle: 'Why ChatSource?',
        convertFeature1Title: 'Instant Conversion',
        convertFeature1Desc: 'Convert conversations to PDF in seconds. No manual formatting needed.',
        convertFeature2Title: 'Professional Layout',
        convertFeature2Desc: 'Beautiful PDFs with table of contents, syntax highlighting, and proper formatting.',
        convertFeature3Title: 'Secure & Private',
        convertFeature3Desc: 'Your data is processed securely. We never store your conversations.',
        convertCtaText: 'Want more control? Use the full editor for manual formatting and AI-powered enhancements.',
        convertCtaBtn: 'Open Full Editor',
    },
    ja: {
        appTitle: 'CHATSOURCE',
        sources: 'ソース',
        editor: 'エディター',
        preview: 'プレビュー',
        detected: '検出:',
        enhance: 'AI 補正:',
        pasteLogHere: 'ここにログを貼り付けてください...',
        processingApi: 'Gemini API で処理中...',
        autoSplitSuccess: 'Gemini API による自動分割が完了しました',
        aiEnhancementApplied: 'AI による補正が適用されました',
        syncApi: 'API 再同期',
        enhanceApi: 'API で補正',
        whatWasIssue: 'どのような問題がありましたか？どう修正すべきですか？...',
        customInstructionsEnhance: "カスタム指示 (例: 'コードブロックのフォーマットを整形して')...",
        cancel: 'キャンセル',
        done: '完了',
        settingsTitle: 'システム設定 v2.4.0',
        settingsEnterPassword: '無料の Gemini API Pro パスワードを入力',
        settingsOrProvideKey: 'または、ご自身の Google AI API キー (Gemini) を入力',
        settingsHint: 'ChatGPT、Claude、その他のチャットログをユーザー/AIに正確に分割するために必要です。',
        testApiKey: 'APIキーをテスト',
        testing: 'テスト中...',
        apiOk: 'API正常',
        getFreeKey: '無料のキーを取得：',
        proTemplate: 'プロフェッショナル: クリーンでモダンなレイアウト',
        academicTemplate: 'アカデミック: フォーマルな文書スタイル',
        cyberTemplate: 'サイバー: ネオンダークハッカー風レイアウト',
        switchMode: '切り替え：',
        apiConsole: 'APIコンソール: LLM 処理ログを表示',
        settingsTooltip: '設定 (Ctrl+,): API制限と構成',
        exportMd: 'マークダウン出力 (.md): 生のテキストファイル',
        exportJson: 'JSON出力: 開発者データフォーマット',
        exportHtml: 'HTML出力: 独立したウェブページ',
        exportPdf: 'PDF出力 (Ctrl+P): 高品質な印刷',
        newSource: '新規ソース',
        formatting: '書式設定',
        tables: 'テーブル',
        code: 'コード',
        latex: 'LaTeX',
        enhanceCardTitle: 'AI で補正する',
        enhanceCardDesc: 'Gemini API を使ってフォーマットを洗練させます。[補正]をクリックした時だけトークンを消費します。',
        enhanceBtnPrefix: '補正',
        responseSuffix: '件のメッセージ',
        responsesSuffix: '件のメッセージ',
        split: '分割',
        sendToNotebookLM: 'NotebookLM に送る: チャットをコピーして AI を開く',
        switchToLightMode: 'ライトモードに切り替え',
        switchToDarkMode: 'ダークモードに切り替え',
        switchToJapanese: '日本語に切り替え',
        switchToEnglish: '英語に切り替え',
        regexMode: '正規表現',
        geminiApiMode: 'Gemini API',
        readyMode: '準備完了',
        noApiKeyMode: 'APIキーなし',
        // Header & auth
        signIn: 'ログイン',
        signInFree: '無料でログイン',
        signInForMore: 'ログインして続ける',
        signOut: 'ログアウト',
        signInCreate: 'ログイン / アカウント作成',
        // Usage counter
        calls: '回',
        words: '語',
        upgrade: 'アップグレード',
        // Enhance area
        enhanceBtn: '補正',
        enhanceHint: '書式が崩れた？ <strong>補正</strong> をクリックして太字・コードブロック・テーブルを復元',
        // Welcome state
        welcomeTitle: 'AIチャットを美しいPDFに',
        welcomeSub: '生のチャットログを数秒でプロフェッショナルなドキュメントに変換',
        welcomeStep1: '貼り付け',
        welcomeStep2: 'AI が整形',
        welcomeStep3: 'PDF 出力',
        welcomeAiFormatting: 'AI 整形',
        welcomeAiFormattingDesc: 'ターン・テーブル・コードを自動検出',
        welcomeExportReady: 'エクスポート',
        welcomeExportReadyDesc: 'PDF・Markdown・印刷レイアウト',
        welcomeMultiLlm: 'マルチ LLM',
        welcomeMultiLlmDesc: 'Gemini・ChatGPT・Claude など',
        tryWithSample: 'サンプルで試す',
        welcomeCta: 'チャットを貼り付けるか <kbd>.txt</kbd> ファイルをドロップ',
        // Empty / error states
        noTurnsDetected: 'ターンが検出されませんでした',
        noTurnsHint: 'エディターにチャットログを貼り付けるか .txt ファイルをドロップ',
        generatingPdf: 'PDF を生成中...',
        generating: '生成中...',
        // Error banner
        rateLimitTitle: 'レート制限',
        authErrorTitle: '認証エラー',
        networkErrorTitle: 'ネットワークエラー',
        signInRequired: 'ログインが必要です',
        apiErrorTitle: 'API エラー',
        noApiActivity: 'API アクティビティなし。Gemini以外のテキストを貼り付けてください。',
        // Settings
        account: 'アカウント',
        apiKeyTab: 'API キー',
        freePlan: '無料プラン',
        proPlan: 'Pro プラン',
        signInHint: 'ログインすると毎週10回のAI処理が無料で使えます。',
        apiCalls: 'API 呼び出し（週間）',
        wordsProcessed: '処理済みの語数（週間）',
        resetsIn: 'リセットまで',
        days: '日',
        proIncludes: 'Pro: 無制限の呼び出し・語数、優先処理',
        upgradeToPro: 'Pro にアップグレード — ¥780/月',
        priceDiscount: '21% OFF',
        priceOriginal: '¥980',
        stripeNote: 'Stripe による安全な決済 · いつでも解約可能',
        paymentSuccess: 'お支払い完了！',
        paymentActivating: 'Pro プランを有効化しています...',
        paymentThankYou: 'アップグレードありがとうございます。通常数秒で反映されます。',
        proUnlimited: 'Pro — 無制限の呼び出しと語数',
        proNoKeyNeeded: 'Pro プランご利用中 — APIキーは不要です！',
        proNoKeyHint: 'すべてのAI機能がサブスクリプションに含まれています。',
        proAdvancedKey: '詳細設定: 自分のキーを使用する',
        proKeyOverride: '自分のキーはProサーバーより優先されます。',
        proSwitchToServer: 'Proサーバーに切り替え',
        proSwitchConfirm: 'APIキーを削除してProサーバーに切り替えますか？',
        proSwitchConfirmDesc: 'ご自身のAPIキーは設定から削除されます。いつでも再入力できます。',
        proSwitchYes: 'Proに切り替え',
        proSwitchCancel: 'キャンセル',
        ownKeyUnlimited: '自分のキーを入力すると無制限で使えます。',
        // SignInPromptModal
        signInPromptTitle: 'もっと使いたい？無料でログイン',
        signInPromptSub: '無料アカウントでAI機能をフル活用',
        signInBenefit1: '毎週10回のAPI呼び出し',
        signInBenefit2: '毎週50,000語まで処理可能',
        signInBenefit3: 'すべての書式設定機能を利用可能',
        signInPromptByok: 'Gemini APIキーをお持ちですか？設定で入力してください',
        // UpgradeModal
        upgradeTitle: 'Pro にアップグレード',
        upgradeTitleLimit: '無料枠の上限に達しました',
        proIncludes2: 'Pro プランに含まれるもの:',
        unlimitedCalls: '無制限のAPI呼び出し',
        unlimitedWords: '無制限の語数処理',
        priorityProcessing: 'Gemini 優先処理',
        allProFeatures: '今後のすべてのPro機能',
        redirectingCheckout: 'チェックアウトにリダイレクト中...',
        upgradeByokHint: 'Gemini APIキーをお持ちですか？',
        enterInSettings: '設定で入力',
        forUnlimitedUse: 'して無制限で使えます。',
        // AuthModal
        authWelcomeBack: 'おかえりなさい',
        authCreateAccount: 'アカウントを作成',
        authSignInSub: 'ログインしてAIチャットをPDFにエクスポート',
        authSignUpSub: '毎週10回まで無料・クレジットカード不要',
        authContinueGoogle: 'Google でログイン',
        authOr: 'または',
        authEmail: 'メールアドレス',
        authPassword: 'パスワード',
        authPasswordHintSignup: '6文字以上',
        authSignInBtn: 'ログイン',
        authCreateBtn: 'アカウント作成',
        authPleaseWait: 'お待ちください...',
        authNoAccount: 'アカウントをお持ちでないですか？',
        authHasAccount: 'すでにアカウントをお持ちですか？',
        authSignUpFree: '無料で登録',
        authCheckEmail: 'メールを確認してください',
        authCheckEmailMsg: 'メールに届いた確認リンクをクリックしてアカウントを有効化してください。',
        authGotIt: '了解',
        // EnhanceThread
        aiEnhancement: 'AI 補正',
        enhancedCount: '補正済み',
        enhancing: '補正中...',
        reEnhancePlaceholder: "問題を指定して再補正 (例: 'テーブルの書式を修正して')...",
        reEnhance: '再補正',
        initialEnhancement: '初回補正',
        // Share link import
        shareImport: '共有リンクを読み込む',
        sharePlaceholder: 'ChatGPT や Gemini の共有リンクを貼り付け...',
        shareLoad: '読み込む',
        shareLoading: '読み込み中...',
        shareSuccess: '{platform} から {count} 件のメッセージを読み込みました',
        shareClaudeUnsupported: 'Claude の共有リンクには対応していません。会話テキストを直接コピー＆ペーストしてください。',
        shareUnsupportedDomain: 'ChatGPT と Gemini の共有リンクのみ対応しています。',
        shareInvalidUrl: '有効な共有リンクURLを入力してください。',
        shareSignInRequired: '共有リンクの読み込みにはログインが必要です。',
        // Convert page
        convertHeroTitle: 'AIチャットをPDFに変換',
        convertHeroSub: 'ChatGPTやGeminiの会話をワンクリックでプロフェッショナルなPDFドキュメントに変換。',
        convertPlaceholder: 'ChatGPT や Gemini の共有リンクを貼り付け...',
        convertToPdf: 'PDFに変換',
        convertToEditor: 'エディターで開く',
        convertHowTitle: '使い方',
        convertStep1Title: '共有リンクを取得',
        convertStep1Desc: 'ChatGPTまたはGeminiの共有ボタンをクリックして公開リンクを生成。',
        convertStep2Title: 'URLを貼り付け',
        convertStep2Desc: '上の入力欄に共有リンクを貼り付け、出力形式を選択。',
        convertStep3Title: 'ダウンロード',
        convertStep3Desc: 'プロフェッショナルなPDFが即座に完成。',
        convertWhyTitle: 'ChatSourceの特長',
        convertFeature1Title: '瞬時に変換',
        convertFeature1Desc: '会話を数秒でPDFに変換。手動のフォーマット不要。',
        convertFeature2Title: 'プロ品質のレイアウト',
        convertFeature2Desc: '目次・シンタックスハイライト・整形済みの美しいPDF。',
        convertFeature3Title: '安全＆プライベート',
        convertFeature3Desc: 'データは安全に処理。会話内容は一切保存しません。',
        convertCtaText: 'もっと自由に編集したい？フルエディターでAI補正や手動フォーマットが可能です。',
        convertCtaBtn: 'フルエディターを開く',
    }
};

export function useTranslation() {
    const [lang, setLang] = useState<Lang>(() => (localStorage.getItem('appLang') as Lang) || 'en');

    useEffect(() => {
        localStorage.setItem('appLang', lang);
    }, [lang]);

    const toggleLang = () => setLang(prev => prev === 'en' ? 'ja' : 'en');
    const t = translations[lang];

    return { lang, toggleLang, t };
}
